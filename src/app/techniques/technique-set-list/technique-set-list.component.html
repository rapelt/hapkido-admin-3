<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-menu-button class="cy-menu-button"></ion-menu-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="more-stuff">
    <div *ngIf="!loaded" class="spinner">
      <ion-spinner></ion-spinner>
    </div>

    <div class="large-content">

      <div class="large-content-left">

        <div *ngIf="loaded">
          <div class="header-bar">
            <div class="breadcrumb-set">
              <span class="breadcrumb">Techniques</span>
            </div>
            <div class="searchbar-container">
              <ion-searchbar class="cy-technique-set-search" [autocomplete]="'on'" (ionCancel)="cancelSearch()" (ionChange)="searchInput($event)" ></ion-searchbar>
              <ion-button fill="clear">
                <ion-icon slot="icon-only" name="ellipsis-vertical-outline"></ion-icon>
              </ion-button>
            </div>
          </div>


          <div class="technique-set-list" *ngIf="segment === 'list'">
            <ion-list class="cy-technique-set-list">
              <ion-item class="cy-technique-set-item" lines="none" button="true" [class]="'technique-set-' + techniqueSet.id" (click)="goToTechniqueSet(techniqueSet.id)" *ngFor="let techniqueSet of techniqueSets | async | techniqueSetFilter: searchvalue; let i = index">
                <ion-row>
                  <ion-col size="1">
                    <ion-icon name="folder-open-outline"></ion-icon>
                  </ion-col>
                  <ion-col size="6">
                    <ion-label>
                      {{techniqueSet.name | capitialise}}
                    </ion-label>
                  </ion-col>
                </ion-row>

              </ion-item>
            </ion-list>

            <div *ngIf="(techniqueSets | async).length === 0">
              <p class="no-techniques">Please add some techniques</p>
            </div>
          </div>


      </div>

      </div>

      <app-side-panel [ngClass]="{'open': sidePaneOpen}" (closeSidePanel)="closeSidePanel()" [title]="sidebarTitle? sidebarTitle: sidebarTitleDefault">
        <div>
          <ion-icon class="top-icon" name="folder-open-outline"></ion-icon>

          <form [formGroup]="newTechniqueSet">
            <ion-list>
              <ion-item>
                <ion-label position="stacked">Title</ion-label>
                <ion-input formControlName="title" name="title" type="text"></ion-input>
              </ion-item>
              <app-validation-error-message [formElement]="newTechniqueSet.get('title')" [validationMessages]="validation_messages.title" [saveAttempted]="saveAttempted"></app-validation-error-message>
            </ion-list>
          </form>
        </div>
        <div class="half-button-size">
          <ion-button (click)="save()" color="primary" expand="full" type="submit">Save</ion-button>
          <ion-button (click)="cancel()" fill="clear" expand="full">Cancel</ion-button>
        </div>

      </app-side-panel>
    </div>

  </div>



</ion-content>



<ion-footer>
  <div *ngIf="loaded && sidePaneOpen === false">
    <ion-fab vertical="bottom" horizontal="end" slot="fixed">
      <ion-fab-button class="cy-add-student-btn" color="tertiary" (click)="newTechnique()">
        <ion-icon name="add"></ion-icon>
      </ion-fab-button>
    </ion-fab>
  </div>
</ion-footer>
